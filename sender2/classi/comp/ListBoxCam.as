package classi.comp{	import flash.display.Sprite;	import flash.geom.Point;	import flash.events.MouseEvent;	import flash.utils.setInterval;	import flash.utils.clearInterval;	import classi.main.Rett;	import classi.comp.ButtonArrow;	public class ListBox extends Sprite {		var w:Number;		var h:Number;		var myXml;		var fnz:Function;		var n:Number;		////		var c:Number;		var conta:Number;		var lab0:Sprite;		var lab1:Sprite;		var lab2:Sprite;		var lab3:Sprite;		var lab4:Sprite;		var lab5:Sprite;		var lab6:Sprite;		var lab7:Sprite;		var lab8:Sprite;		var lab9:Sprite;		var up:Sprite;		var down:Sprite;		public function ListBox(xx:Number,yy:Number,ww,hh,f:Function, xml, nn, altUp, altDown) {									x = xx;			y = yy;			n = nn;			fnz = f;			scrollF = new Rett(0, 0, ww, (hh*n)+1, 0x999999, null, 1)			this.addChild(scrollF);			var fPos			if (n == 1) {				fPos = {xUp:ww-24,xDown:ww-13,yUp:2,yDown:(hh*n)-7}				this.lab0 = new ButtonTxt(0, 0, ww-28, hh, " ", seleziona, 0, null);				this.addChild(lab0);			} else {				fPos = {xUp:ww-11,xDown:ww-11,yUp:1,yDown:(hh*n)-6}				for (var b=0; b<n; b++) {					this["lab"+b] = new ButtonTxt(0, b*hh, ww-13, hh, " ", seleziona, b, null);					this.addChild(this["lab"+b]);				}			}			this.up = new ButtonArrow(fPos.xUp, fPos.yUp, 180, avvia_scrolla, -1, null);			this.down = new ButtonArrow(fPos.xDown, fPos.yDown, 0, avvia_scrolla, 1, null);			this.addChild(down);			this.addChild(up);			if (xml) {				avvia(xml);			}		}		public function avvia(xml) {			conta = 0;			myXml = xml;			riempi();		}		function riempi() {			for (var d=0; d<n; d++) {				if (d+conta<myXml.childNodes[0].childNodes.length) {					this["lab"+d].lab.text = myXml.childNodes[0].childNodes[d].attributes.m;				} else {					this["lab"+d].lab.text = " ";				}			}		}		function avvia_scrolla(b) {			if (b != undefined) {				c = setInterval(scrolla, 100, b);				scrolla(b);			} else {				clearInterval(c);			}		}		function scrolla(b) {			if (conta+b>=0) {				if (b+conta<myXml.childNodes.length) {					conta += b;					riempi();				} else {					clearInterval(c);				}			}		}		function seleziona(b) {			if (myXml.childNodes[0].childNodes[conta+b].attributes.val != undefined) {				fnz(myXml.childNodes[0].childNodes[conta+b].attributes.val);			} else if (myXml.childNodes[0].childNodes[conta+b].attributes.m != undefined) {				fnz(myXml.childNodes[0].childNodes[conta+b].attributes.m);			}		}	}}